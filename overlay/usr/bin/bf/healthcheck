#!/usr/bin/nu

use bf
bf env load -x

# Attempt to load DNS for $domain
def main [
    domain: string = "cloudflare.com"   # Te domain to load
] {
    bf write debug $"Requesting DNS for ($domain)."

    # capture output of drill executable
    let result = do { drill $domain @127.0.0.1 } | complete
    if $result.exit_code > 0 {
        bf write error --code $result.exit_code ($result.stderr | str trim)
    }
}
